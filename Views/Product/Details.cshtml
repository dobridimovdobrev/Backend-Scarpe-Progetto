@model Scarpe___Co_Progetto.Models.Product

<div class="container-fluid py-5">
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold custom-font text-uppercase">@Model.Name</h1>
        <div class="mt-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z" />
            </svg>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="row">
                    <div class="col-2">
                        <div class="d-flex flex-column gap-3">
                            <img src="@Model.MainImage" alt="@Model.Name" class="img-fluid border rounded cursor-pointer thumbnail-img" onclick="changeMainImage('@Model.MainImage')" />
                            <img src="@Model.Image2" alt="@Model.Name" class="img-fluid border rounded cursor-pointer thumbnail-img" onclick="changeMainImage('@Model.Image2')" />
                            <img src="@Model.Image3" alt="@Model.Name" class="img-fluid border rounded cursor-pointer thumbnail-img" onclick="changeMainImage('@Model.Image3')" />
                        </div>
                    </div>

                    <div class="col-10">
                        <div class="position-relative">
                            <button class="btn btn-light position-absolute top-0 end-0 m-3 rounded-circle">
                                <i class="bi bi-search"></i>
                            </button>
                            <img src="@Model.MainImage" alt="@Model.Name" class="img-fluid bg-light p-4" id="mainImage" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="ps-lg-4">
                    <h2 class="fw-bold text-uppercase mb-3">@Model.Name</h2>

                    <div class="d-flex align-items-center gap-3 mb-4">
                        <span class="fw-bold fs-3 orange-color">$@Model.Price</span>
                        <div class="text-warning ms-3">★★★★★</div>
                    </div>

                    <p class="text-muted mb-4">@Model.Description</p>

                    <div class="d-flex align-items-center gap-3 mb-4">
                        <div class="input-group" style="width: 120px;">
                            <button class="btn btn-outline-secondary" type="button" onclick="decrementQty()">-</button>
                            <input type="text" class="form-control text-center" value="1" id="quantity" readonly />
                            <button class="btn btn-outline-secondary" type="button" onclick="incrementQty()">+</button>
                        </div>

                        <button class="btn w-50 btn-danger btn-lg px-5 py-2 text-uppercase fw-bold">
                            <i class="bi bi-cart3 me-2"></i> BUY NOW
                        </button>
                    </div>

                    <div class="border-top pt-3">
                        <p class="mb-2">
                            <strong>CATEGORY:</strong>
                            <a href="#" class="text-decoration-none text-muted">Sport Style</a>
                        </p>
                        <p class="mb-2">
                            <strong>TAGS:</strong>
                            <a href="#" class="text-decoration-none text-muted">Design</a>,
                            <a href="#" class="text-decoration-none text-muted">Fashion</a>,
                            <a href="#" class="text-decoration-none text-muted">Sale</a>
                        </p>
                        <p class="mb-0">
                            <strong>PRODUCT ID:</strong> @Model.Id
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-5">
            <div class="col-12">
                <ul class="nav nav-tabs border-bottom mb-4" id="productTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active text-uppercase fw-bold" id="description-tab"
                                data-bs-toggle="tab" data-bs-target="#description" type="button">
                            DESCRIPTION
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link text-uppercase fw-bold" id="reviews-tab"
                                data-bs-toggle="tab" data-bs-target="#reviews" type="button">
                            REVIEWS (1)
                        </button>
                    </li>
                </ul>

                <div class="tab-content" id="productTabsContent">
                    <div class="tab-pane fade show active" id="description" role="tabpanel">
                        <p class="text-muted">@Model.Description</p>
                    </div>

                    <div class="tab-pane fade" id="reviews" role="tabpanel">
                        <p class="text-muted">No reviews yet. Be the first to review this product!</p>
                    </div>
                </div>
            </div>
        </div>
        <!--related products-->
        <div class="row mt-5">
            <div class="col-12">
                <h3 class="fw-bold text-uppercase mb-4">RELATED PRODUCTS</h3>
            </div>

            @{
                var relatedProducts = Scarpe___Co_Progetto.LocalDatabase.ProductsList.GetAll().Take(4);
            }

            @foreach (var related in relatedProducts)
            {
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card border-0 h-100 product-card">
                        <a asp-controller="Product" asp-action="Details" asp-route-id="@related.Id" class="text-decoration-none text-dark">
                            <div class="card-body text-center bg-light p-4">
                                <img src="@related.MainImage" alt="@related.Name" class="img-fluid mb-3" />
                                <h6 class="card-title text-uppercase fw-bold">@related.Name</h6>
                                <p class="card-text fw-bold">$@related.Price</p>
                            </div>
                        </a>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function changeMainImage(imageUrl) {
            document.getElementById('mainImage').src = imageUrl;
        }

        function incrementQty() {
            let qty = document.getElementById('quantity');
            qty.value = parseInt(qty.value) + 1;
        }

        function decrementQty() {
            let qty = document.getElementById('quantity');
            if (parseInt(qty.value) > 1) {
                qty.value = parseInt(qty.value) - 1;
            }
        }
    </script>
}